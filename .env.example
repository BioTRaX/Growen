# Runtime
ENV=dev

# Directorio donde se almacenan los logs de desarrollo
LOG_DIR=logs

# DB (usar PostgreSQL en dev y prod)
# Si la password tiene caracteres reservados (p.ej. '='), usar URL-encoding.
# '=' => %3D, ':' => %3A, '@' => %40
# Ejemplo:
DB_URL=postgresql+psycopg://usuario:password@localhost:5432/growen

# Nivel de logging de Alembic (INFO por defecto)
ALEMBIC_LOG_LEVEL=INFO
# Si vale 1, scripts/debug_migrations.py imprime más detalle
DEBUG_MIGRATIONS=0

# Tiendanube
TN_CLIENT_ID=
TN_CLIENT_SECRET=
TN_ACCESS_TOKEN=
TN_SHOP_ID=

# AI Hybrid
AI_MODE=auto            # auto | openai | ollama
AI_ALLOW_EXTERNAL=true  # false => bloquea proveedores externos
OLLAMA_URL=http://localhost:11434
OLLAMA_MODEL=llama3.1
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4.1-mini

# Enriquecimiento IA: búsqueda web vía MCP (opcional)
# Si está en 1 y AI_ALLOW_EXTERNAL=true, el backend consulta el MCP Web Search
# y anexa top resultados al prompt del enriquecimiento de productos.
AI_USE_WEB_SEARCH=0          # 0|1
AI_WEB_SEARCH_MAX_RESULTS=3  # tope de resultados a anexar
MCP_WEB_SEARCH_URL=http://mcp_web_search:8002/invoke_tool

# Logging IA opcional: si vale 1, crea logs/ai.log con eventos de IA
AI_LOG_FILE=0

# MCP Servers
# URL para invocar el servidor MCP de productos (tool-calling). No hardcodear en código.
MCP_PRODUCTS_URL=http://mcp_products:8001/invoke_tool

# Límites/Timeouts
AI_MAX_TOKENS_SHORT=256
AI_MAX_TOKENS_LONG=2048
AI_TIMEOUT_OLLAMA_MS=12000
AI_TIMEOUT_OPENAI_MS=60000

# API Server
# Host donde escucha la API
HOST=0.0.0.0
# Puerto de escucha de la API
PORT=8000
# Nivel de logging de la aplicación (DEBUG, INFO, etc.)
LOG_LEVEL=INFO
# Si vale 1, SQLAlchemy mostrará cada consulta ejecutada
DEBUG_SQL=0

# Auth y seguridad
# En producción deben sobrescribirse SECRET_KEY, ADMIN_USER y ADMIN_PASS.
# En desarrollo, si permanecen en los placeholders se usarán valores de prueba
# poco seguros para simplificar el arranque.
SECRET_KEY=REEMPLAZAR_SECRET_KEY
# Duración de la sesión en minutos.
# El valor sugerido de 1440 (1 día) equilibra seguridad y comodidad:
# valores mayores prolongan el login pero aumentan el riesgo si se roban cookies;
# valores menores fuerzan reautenticaciones más frecuentes.
SESSION_EXPIRE_MINUTES=1440
# Se ignora en producción; allí siempre es true
COOKIE_SECURE=false
COOKIE_DOMAIN=
# Orígenes permitidos para CORS, separados por coma. En producción
# deben especificarse dominios exactos; en desarrollo se completan
# automáticamente las variantes localhost/127.0.0.1
ALLOWED_ORIGINS=http://localhost:5173,http://127.0.0.1:5173
# Usuario administrador inicial; si no existe, se crea al ejecutar migraciones
ADMIN_USER=admin
ADMIN_PASS=REEMPLAZAR_ADMIN_PASS
# Tamaño máximo de archivos que acepta la API (MB)
MAX_UPLOAD_MB=8
# Si es true, requiere autenticación basada en sesiones
AUTH_ENABLED=true
# Resultados máximos por página al listar productos
PRODUCTS_PAGE_MAX=100
# Cantidad de entradas por página al consultar historial de precios
PRICE_HISTORY_PAGE_SIZE=20
# Crea productos canónicos automáticamente al importar
AUTO_CREATE_CANONICAL=true
# Umbral de similitud para sugerencias difusas
FUZZY_SUGGESTION_THRESHOLD=0.87
# Número de sugerencias devueltas en búsquedas aproximadas
SUGGESTION_CANDIDATES=3
# Tamaño máximo de subida en MB para el frontend
VITE_MAX_UPLOAD_MB=15

# Media y Jobs
MEDIA_ROOT=./Imagenes
REDIS_URL=redis://localhost:6379/0
CLAMAV_ENABLED=true
CLAMD_HOST=127.0.0.1
CLAMD_PORT=3310
WATERMARK_LOGO=

# Integraciones
TELEGRAM_TOKEN=
TELEGRAM_CHAT_ID=
LLAMA_BASE_URL=

# Notion (errores conocidos)

# Notion (errores conocidos)
# Habilita el envío de tarjetas a Notion (false por defecto para evitar sorpresas)
NOTION_FEATURE_ENABLED=false
# API key secreta de integración (token de Notion)
NOTION_API_KEY=
# ID de la base de Notion para "Errores conocidos" (Database ID)
NOTION_ERRORS_DATABASE_ID=
# Opcional: modo dry-run para depurar payloads sin crear páginas
NOTION_DRY_RUN=1

# MCP Security (JWT)
# Clave secreta para firmar tokens MCP (DEBE ser única, 32+ bytes)
# Generar con: python -c "import secrets; print(secrets.token_hex(32))"
MCP_SECRET_KEY=
# Rate limit: peticiones por minuto por usuario
MCP_RATE_LIMIT_PER_MINUTE=60
